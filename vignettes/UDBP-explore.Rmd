---
title: "Exploring the UDBP Variable"
author: "Windy Wang"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette:
  fig_caption: yes
vignette: >
  %\VignetteIndexEntry{Exploring the UDBP Variable}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE, echo = FALSE, message = FALSE, warning = FALSE)
library(dplyr)
devtools::load_all()
load_data(update = TRUE)
set_options()
extrafont::loadfonts(device="win")

ds <- project_data
```


some notes:
fig.cap = "Your figure caption." 

The figure sizes have been customised so that you can easily put two images side-by-side. 
```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

## Distribution
```{r histogram}
ds %>% 
  histo_plot(variable = "UDBP", 
             bin = 30, 
             xlab = "Urinary VDBP (ng/mL)",
             facet = TRUE)
```

Summary statistics
```{r}
ds %>% 
  filter(fVN == "Baseline") %>% 
  select(UDBP) %>% 
  summary()

ds %>% 
  filter(fVN == "3Year") %>% 
  select(UDBP) %>% 
  summary()

ds %>% 
  filter(fVN == "6Year") %>% 
  select(UDBP) %>% 
  summary()
```


## UDBP Progression

Convert long-data to wide

```{r long to wide}

ds_UDBP_wide <- ds %>% 
  dplyr::select(SID, VN, UDBP) %>% 
  tidyr::spread(key = VN, value = UDBP)

```

```{r boxplot}

ds %>% 
  box_plot(xvar="fVN",
           yvar="log(udbpCrRatio)",
           xlab="Visit Number",
           ylab="log Urinary VDBP (ng/mL)")
```

```{r growth curve}
ds %>% 
  dplyr::mutate(fSID = factor(SID)) %>%
  dplyr::filter(UDBP < 200) %>%
  line_plot(xvar="fVN",
            yvar="UDBP",
            byvar="fSID",
            xlab="Visit Number",
            ylab="Urinary VDBP (ng/mL)")
```

```{r latent curve mixed models}

```

